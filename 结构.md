# 仓库结构

E2C Test-Time Scaling 实验（AIME 2024）。

## 目录结构

```
tts/
├── 结构.md                    # 本文件，项目结构说明
├── README.md                  # 使用说明
├── requirements.txt           # 依赖
│
├── data/                      # 数据目录
│   └── aime2024/              # AIME 2024  benchmark
│       ├── README.md          # 数据下载说明
│       └── aime2024.parquet   # [需下载] 放置 AIME 2024 数据
│
├── Qwen3-8B-E2C-SFT-RL/      # [已就绪] E2C 模型权重
│
├── util/                      # 工具模块
│   ├── __init__.py
│   ├── reward.py              # 答案解析与评估 (normalize, extract_boxed)
│   ├── model.py               # 模型加载
│   └── dataset.py             # 数据集加载
│
├── prompts.py                 # E2C prompt 模板
│
├── tts_methods.py             # Test-Time Scaling 方法实现
│   ├── greedy_cot             # Greedy CoT (N=1)
│   ├── self_consistency       # Self-Consistency
│   ├── e2c_select_lm_judge    # E2C-Select (Self LM-Judge)
│   ├── e2c_select_semantic    # E2C-Select (Semantic Cluster)
│   ├── e2c_sc                 # E2C-SC (Self-Consistency ablation)
│   └── e2c_rp                 # E2C-RP (Random Plan ablation)
│
├── run_tts.py                 # 主入口脚本
├── config/
│   └── tts.yaml               # 实验配置
│
└── outputs/                   # 输出目录
    └── aime2024/              # AIME 2024 评估结果
```

## 方法对照

| 方法 | 说明 |
|------|------|
| Greedy CoT | N=1，单次 greedy 解码 |
| Self-Consistency | N 条完整推理链，多数投票 |
| E2C-Select (Self LM-Judge) | 采样 K 个 exploration，模型选最优，执行 1 次 |
| E2C-Select (Semantic Cluster) | 采样 K 个 exploration，K-Means 聚类 M=3，执行 centroid，加权投票 |
| E2C-SC | 执行全部 K 个 exploration（高成本上界） |
| E2C-RP | 从 K 个中随机选 1 个执行（消融） |

## Budget Levels

K 或 N ∈ {4, 8, 16, 32}

## 指标

- **Pass@1 accuracy**：准确率
- **Tokens (k)**：每道题平均生成 token 数（千）
